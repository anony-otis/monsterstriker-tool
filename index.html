<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2025 怪物彈珠 高級配裝計算器｜外部資料即時載入</title>
  <style>
    /* (保持原有漂亮介面，省略貼出以節省空間) */
    /* 你原本的 CSS 全保留 */
  </style>
</head>
<body>
  <!-- 原有 HTML 結構全保留 -->

  <script>
    let DB = {monsters: [], quests: [], trans: {}};

    async function load() {
      try {
        // 直接從外部連結載入 characters.json
        const response = await fetch('https://firebasestorage.googleapis.com/v0/b/walkthrough-tool.appspot.com/o/monst%2Fmaster%2Fcharacters.json?alt=media');
        if (!response.ok) throw new Error('連結失效或檔案不存在');
        let m = await response.json();

        // 只留六星角色（rarity == 6）
        m = m.filter(char => char.rarity === 6);

        DB.monsters = m;

        // 關卡資料保持本地（或你之後也換外部）
        const q = await fetch('data/quests.json').then(r=>r.json());
        DB.quests = q;

        // 翻譯檔保持本地
        const t = await fetch('data/translation.json').then(r=>r.json()).catch(()=>({}));
        DB.trans = t;

        // 其餘邏輯（搜尋框、顯示等）全保持不變
        // ... (原有 code 全保留)

        calc();
      } catch(e) {
        document.getElementById('result').innerHTML = `<p style="color:red">外部資料載入失敗！<br>錯誤：${e.message}<br>請檢查連結是否有效</p>`;
      }
    }

    // 其餘 calc() 和 filterMonsters() 邏輯全保持

    load();
  </script>
</body>
</html>
